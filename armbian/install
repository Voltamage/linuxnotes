#!/bin/bash
bold=$(tput bold)
normal=$(tput sgr0)

echo "${bold}[INSTALLING]${normal}"
echo "${bold}[Installing aria2]${normal}"
sudo apt-get install aria2
mkdir ~/.config/aria2
curl https://raw.githubusercontent.com/voltamage/notes/master/armbian/.config/aria2/aria2.conf > ~/.config/aria2/aria2.conf -#
echo "${bold}[Installing armbian-config]${normal}"
sudo apt-get install armbian-config
echo "${bold}[Installing docker]${normal}"
sudo apt-get install apt-transport-https ca-certificates gnupg2 software-properties-common
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
sudo add-apt-repository "deb [arch=armhf] https://download.docker.com/linux/debian $(lsb_release -cs) stable"
sudo sed -i '/deb-src/d' /etc/apt/sources.list
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli docker-compose
echo "${bold}[Installing glusterfs-server]${normal}"
sudo apt-get install glusterfs-server rpcbind
sudo systemctl enable --now glusterd
echo "${bold}[Installing hdparm (HDD park fix)]${normal}"
sudo apt-get install hdparm
curl https://dn.odroid.com/5422/script/odroid.shutdown > /tmp/odroid.shutdown -#
sudo install -o root -g root -m 0755 /tmp/odroid.shutdown /lib/systemd/system-shutdown/odroid.shutdown
rm /tmp/odroid.shutdown
echo "${bold}[Installing htop]${normal}"
sudo apt-get install htop
sudo rm -rf /root/.config/htop
sed -i -e '/tree_view/c\tree_view=1' ~/.config/htop/htoprc
echo "${bold}[Installing iotop]${normal}"
sudo apt-get install iotop
echo "${bold}[Installing man-db]${normal}"
sudo apt-get install man-db
echo "${bold}[Installing msrsync / rsync]${normal}"
sudo apt-get install python rsync
curl https://raw.githubusercontent.com/jbd/msrsync/master/msrsync > ~/scripts/msrsync -#
sudo chmod u+x ~/scripts/msrsync
echo "${bold}[Installing ncdu]${normal}"
sudo apt-get install ncdu
echo "${bold}[Installing needrestart]${normal}"
sudo apt-get install needrestart
echo "${bold}[Installing neofetch]${normal}"
sudo apt-get install neofetch
mkdir ~/.config/neofetch
curl https://raw.githubusercontent.com/voltamage/notes/master/armbian/.config/neofetch/config.conf > ~/.config/neofetch/config.conf -#
echo "${bold}[Installing nload]${normal}"
sudo apt-get install nload
echo "${bold}[Installing nmap]${normal}"
sudo apt-get install nmap
sed -i "1 i\alias iplist='nmap -sP 192.168.2.1/24'" ~/.oh-my-zsh/custom/aliases.zsh
echo "${bold}[Installing ranger]${normal}"
sudo apt-get install file mediainfo ranger
echo "${bold}[Installing smartmontools (smartctl)]${normal}"
sudo apt-get install smartmontools
sed -i "1 a alias diskhealth='sudo smartctl -i /dev/sda && sudo smartctl -A /dev/sda'" ~/.oh-my-zsh/custom/aliases.zsh
echo "${bold}[Installing sshfs]${normal}"
sudo apt-get install sshfs
echo "${bold}[Installing tmux]${normal}"
sudo apt-get install tmux

echo "${bold}[POSTCHECKING]${normal}"
echo "${bold}[Checking updates]${normal}"
sudo apt-get update
sudo apt-get dist-upgrade
echo "${bold}[Checking reboot]${normal}"
sudo needrestart
read -p "Press any key to continue..." -n1 -s
echo ""
echo "${bold}[DONE]${normal}"
exec zsh
